/*
 *    Created by: Andrew O'Shei
 * 
 *    Various functions to write and retrieve data from SD Card Reader
 * 
 */

#ifndef DATA_WRITER_H
#define DATA_WRITER_H

#include <Arduino.h>
#include "FS.h"
#include "SD.h"
#include <SPI.h>
#include <ArduinoJson.h>
#include "data_helpers.h"

extern int id;

extern char path[256];

extern char fileBuffer[4096];

extern int deviceTotal;

bool setupSDCard();

void setPath(String targ_path);

bool createDir(String targ_path);

bool checkPathExists(String targ_path);

bool readFile(String targ_path);

int getDeviceJson();

int findDeviceCount();

bool writeFile(String targ_path, String message);

bool appendFile(String targ_path, String message);

bool deleteFile(String targ_path);

void addDeviceEntry(String btName, String btAddress, uint32_t btClass);

void resetID();

char* getDeviceName(int device);

char* getDeviceMac(int device);

uint32_t getDeviceClass(int device);

#endif
